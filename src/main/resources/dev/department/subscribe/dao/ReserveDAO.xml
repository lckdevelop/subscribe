<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC  "-//mybatis.org//DTD Mapper 3.0//EN"     
    "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dev.department.subscribe.dao.ReserveDAO">

	<select id='getUnpermittedVisitList' parameterType="PagingDTO" resultType="ReserveListDTO">
		  SELECT R.NO			,
		         M.NAME			,
		         M.PHONE		,
		         R.RESTIME		,
		         R.KIND			,
		         R.MEMO			,
		         R.STATUS
		    FROM RESERVATION R
		    JOIN MEMBER M
		      ON R.MEMBER_NO = M.NO
		   WHERE STATUS = 0
		     AND R.BRAND_NO = #{brandNo}
		     AND NAME LIKE '%'||#{search}||'%'
		ORDER BY RESTIME
		  OFFSET (#{page} - 1) * 5 ROWS FETCH NEXT 5 ROWS ONLY
	</select>
	
	
</mapper>